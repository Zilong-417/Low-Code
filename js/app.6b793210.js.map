{"version":3,"file":"js/app.6b793210.js","mappings":"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","sources":["webpack://low-code/./src/App.vue","webpack://low-code/./src/packages/block-resize.jsx","webpack://low-code/./src/packages/events.js","webpack://low-code/./src/packages/editor-block.jsx","webpack://low-code/./src/packages/useMenuDragger.js","webpack://low-code/./src/packages/useFocus.js","webpack://low-code/./src/packages/useBlockDragger.js","webpack://low-code/./src/packages/useCommand.js","webpack://low-code/./src/components/Dialog.jsx","webpack://low-code/./src/packages/editor-operator.jsx","webpack://low-code/./src/packages/editor-event.jsx","webpack://low-code/./src/packages/editor.jsx","webpack://low-code/./src/utils/editor-config.jsx","webpack://low-code/./src/App.vue?7ccd","webpack://low-code/./src/main.js","webpack://low-code/webpack/bootstrap","webpack://low-code/webpack/runtime/chunk loaded","webpack://low-code/webpack/runtime/compat get default export","webpack://low-code/webpack/runtime/define property getters","webpack://low-code/webpack/runtime/global","webpack://low-code/webpack/runtime/hasOwnProperty shorthand","webpack://low-code/webpack/runtime/make namespace object","webpack://low-code/webpack/runtime/publicPath","webpack://low-code/webpack/runtime/jsonp chunk loading","webpack://low-code/webpack/startup"],"sourcesContent":["<template>\r\n  <div class=\"app\">\r\n    <Editor v-model=\"state\" :formData=\"formData\"></Editor>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, provide } from 'vue';\r\nimport data from './data.json';\r\nimport Editor from './packages/editor';\r\nimport { registerConfig as config } from './utils/editor-config';\r\nexport default {\r\n  components: {\r\n    Editor\r\n  },\r\n  setup() {\r\n    const state = ref(data);\r\n    provide('config', config); // 将组件的配置直接传值\r\n\r\n    const formData = ref({\r\n      username: 'hahaha',\r\n      password: 123456,\r\n    })\r\n\r\n    return {\r\n      state,\r\n      formData\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.app {\r\n  position: fixed;\r\n  top: 20px;\r\n  left: 20px;\r\n  right: 20px;\r\n  bottom: 20px;\r\n}\r\n</style>\r\n","import { defineComponent } from \"vue\";\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        block: { type: Object },\r\n        component: { type: Object }\r\n    },\r\n\r\n    setup(props, ctx) {\r\n        const { width, height } = props.component.resize || {}\r\n        let data = {}\r\n        const onmousemove = (e) => {\r\n            let { clientX, clientY } = e;\r\n            let { startX, startY, startWidth, startHeight, startLeft, startTop, direction } = data;\r\n\r\n\r\n            if (direction.horizontal == 'center') {  // 如果拖拽的是 中间的点 X轴是不变的\r\n                clientX = startX\r\n            }\r\n            if (direction.vertical == 'center') {  // 只能改横向 纵向是不发生变化的\r\n                clientY = startY\r\n            }\r\n\r\n            let durX = clientX - startX;\r\n            let durY = clientY - startY;\r\n\r\n            if (direction.vertical == 'start') { // 针对反向拖拽的点 需要取反，拿到正确的组件top和left\r\n                durY = -durY\r\n                props.block.top = startTop - durY\r\n            }\r\n            if (direction.horizontal == 'start') {\r\n                durX = -durX\r\n                props.block.left = startLeft - durX\r\n            }\r\n\r\n\r\n            const width = startWidth + durX;\r\n            const height = startHeight + durY;\r\n\r\n            props.block.width = width;\r\n            props.block.height = height; // 拖拽的时候 改变了宽高\r\n            props.block.hasResize = true\r\n\r\n        }\r\n        const onmouseup = () => {\r\n            console.log('mouseup')\r\n            document.body.removeEventListener('mousemove', onmousemove)\r\n            document.body.removeEventListener('mouseup', onmouseup)\r\n        }\r\n        const onmousedown = (e, direction) => {\r\n            e.stopPropagation();\r\n            data = {\r\n                startX: e.clientX,\r\n                startY: e.clientY,\r\n                startWidth: props.block.width,\r\n                startHeight: props.block.height,\r\n                startLeft: props.block.left,\r\n                startTop: props.block.top,\r\n                direction\r\n            }\r\n            document.body.addEventListener('mousemove', onmousemove)\r\n            document.body.addEventListener('mouseup', onmouseup)\r\n        }\r\n        return () => <>\r\n            {width && <>\r\n                <div class=\"block-resize block-resize-left\"\r\n                    onMousedown={e => onmousedown(e, { horizontal: 'start', vertical: 'center' })}></div>\r\n                <div class=\"block-resize block-resize-right\"\r\n                    onMousedown={e => onmousedown(e, { horizontal: 'end', vertical: 'center' })}></div>\r\n            </>}\r\n\r\n            {height && <>\r\n                <div class=\"block-resize block-resize-top\"\r\n                    onMousedown={e => onmousedown(e, { horizontal: 'center', vertical: 'start' })}></div>\r\n                <div class=\"block-resize block-resize-bottom\"\r\n                    onMousedown={e => onmousedown(e, { horizontal: 'center', vertical: 'end' })}></div>\r\n            </>}\r\n\r\n            {width && height && <>\r\n                <div class=\"block-resize block-resize-top-left\"\r\n                    onMousedown={e => onmousedown(e, { horizontal: 'start', vertical: 'start' })}></div>\r\n                <div class=\"block-resize block-resize-top-right\"\r\n                    onMousedown={e => onmousedown(e, { horizontal: 'end', vertical: 'start' })}></div>\r\n                <div class=\"block-resize block-resize-bottom-left\"\r\n                    onMousedown={e => onmousedown(e, { horizontal: 'start', vertical: 'end' })}></div>\r\n                <div class=\"block-resize block-resize-bottom-right\"\r\n                    onMousedown={e => onmousedown(e, { horizontal: 'end', vertical: 'end' })}\r\n                ></div>\r\n            </>}\r\n        </>\r\n    }\r\n})","import mitt from 'mitt';\r\nexport const events = mitt(); // 导出一个发布订阅的对象 \r\n","import { computed, defineComponent, inject, onMounted, ref } from \"vue\";\r\nimport BlockResize from './block-resize'\r\nimport { events } from \"./events\";\r\nexport default defineComponent({\r\n    props: {\r\n        block: { type: Object },\r\n        formData: { type: Object }\r\n    },\r\n    setup(props) {\r\n        const blockStyles = computed(() => ({\r\n            top: `${props.block.top}px`,\r\n            left: `${props.block.left}px`,\r\n            zIndex: `${props.block.zIndex}`\r\n        }));\r\n        const config = inject('config')\r\n\r\n        const blockRef = ref(null)\r\n        onMounted(() => {\r\n            console.log(props)\r\n            // console.log(props.block)\r\n            let { offsetWidth, offsetHeight } = blockRef.value\r\n            if (props.block.alignCenter) { // 拖拽松手的时候才渲染的，其他的默认渲染到页面上的内容不需要居中\r\n                props.block.left = props.block.left - offsetWidth / 2\r\n                props.block.top = props.block.top - offsetHeight / 2 // 原则上重新派发事件\r\n                props.block.alignCenter = false // 让渲染后的结果才能去居中\r\n                props.block.width = offsetWidth;\r\n                props.block.height = offsetHeight;\r\n            } else {\r\n                const getblocksize = new Promise((resolve, reject) => {\r\n                    //事件总线，接收数据（选择后的宽高）\r\n                    events.on(\"blocksize\", (msg) => {\r\n                        resolve(msg)\r\n                        console.log(msg)\r\n                    })\r\n                })\r\n                getblocksize.then((msg) => {\r\n                    //split截取字符串\r\n                    let pwidth = Number(String(msg.props.width).split('p', 1))\r\n                    let pheight = Number(String(msg.props.height).split('p', 1))\r\n                    props.block.width = pwidth ? pwidth : msg.width\r\n                    props.block.height = pheight ? pheight : msg.height\r\n                })\r\n            }\r\n        })\r\n        return () => {\r\n            // 通过block的key属性直接获取对应的组件 \r\n            const component = config.componentMap[props.block.key];\r\n            // 获取render函数\r\n            const RenderComponent = component.render({\r\n                size: props.block.hasResize ? { width: props.block.width, height: props.block.height } : {},\r\n                props: props.block.props,\r\n                events: props.block.events,\r\n                model: Object.keys(component.model || {}).reduce((prev, modelName) => {\r\n                    let propName = props.block.model[modelName]; // 'username'\r\n                    prev[modelName] = {\r\n                        modelValue: props.formData[propName], // zfjg\r\n                        \"onUpdate:modelValue\": v => props.formData[propName] = v\r\n                    }\r\n                    return prev;\r\n                }, {})\r\n            })\r\n            const { width, height } = component.resize || {}\r\n            return <div class=\"editor-block\" style={blockStyles.value} ref={blockRef}>\r\n                {RenderComponent}\r\n                {/* 传递block的目的是为了修改当前block的宽高， component中存放了是修改高度还是宽度 */}\r\n                {props.block.focus && (width || height) && <BlockResize\r\n                    block={props.block}\r\n                    component={component}\r\n                ></BlockResize>}\r\n            </div>\r\n        }\r\n    }\r\n})","import { events } from \"./events\";\r\nexport function useMenuDragger(containerRef, data) {\r\n    let currentComponent = null\r\n    const dragenter = (e) => {\r\n        e.dataTransfer.dropEffect = 'move'\r\n    }\r\n    const dragover = (e) => {\r\n        e.preventDefault()\r\n    }\r\n    const dragleave = (e) => {\r\n        e.dataTransfer.dropEffect = 'none'\r\n    }\r\n    const drop = (e) => {\r\n        let blocks = data.value.blocks;\r\n        data.value = {\r\n            ...data.value, blocks: [\r\n                ...blocks, {\r\n                    top: e.offsetY,\r\n                    left: e.offsetX,\r\n                    zIndex: 1,\r\n                    key: currentComponent.key,\r\n                    alignCenter: true,\r\n                    props: {},\r\n                    model: {},\r\n                    events: {}\r\n                }\r\n            ]\r\n        }\r\n        currentComponent = null\r\n    }\r\n    const dragstart = (e, component) => {\r\n        //dragenter进入元素中 添加一个移动的标志\r\n        //dragover 在目标元素经过 必须要阻止默认行为 否则不能触发drop\r\n        //dragleave 离开元素的时候 需要增加一个禁用标识\r\n        //drop 松手时 根据拖拽的组件 ，添加一个组件\r\n        containerRef.value.addEventListener('dragenter', dragenter)\r\n        containerRef.value.addEventListener('dragover', dragover)\r\n        containerRef.value.addEventListener('dragleave', dragleave)\r\n        containerRef.value.addEventListener('drop', drop)\r\n        currentComponent = component\r\n        events.emit('start')//注册start\r\n        //console.log(containerRef.value)\r\n    }\r\n    console.log(data.value)\r\n    const dragend = (e) => {\r\n        containerRef.value.removeEventListener('dragenter', dragenter)\r\n        containerRef.value.removeEventListener('dragover', dragover)\r\n        containerRef.value.removeEventListener('dragleave', dragleave)\r\n        containerRef.value.removeEventListener('drop', drop)\r\n        events.emit('end')//发布end\r\n    }\r\n    return {\r\n        dragstart, dragend\r\n    }\r\n}","import { computed, ref } from 'vue'\r\nexport function useFocus(data, previewRef, callback) {\r\n\r\n    const selectIndex = ref(-1)//表示没有任何一个被选中\r\n\r\n    //最后选择的哪一个\r\n    const lastSelectBlock = computed(() => data.value.blocks[selectIndex.value])\r\n    console.log(lastSelectBlock)\r\n    const focusData = computed(() => {\r\n        let focus = []\r\n        let unfocused = []\r\n        data.value.blocks.forEach(block => (block.focus ? focus : unfocused).push(block))\r\n        return { focus, unfocused }\r\n    })\r\n    const clearBlockFocus = () => {\r\n        data.value.blocks.forEach(block => block.focus = false)\r\n    }\r\n    //实现拖拽多个元素\r\n    const containerMousedown = () => {\r\n        if (previewRef.value) return;\r\n        clearBlockFocus()\r\n        selectIndex.value = -1\r\n    }\r\n    const blockMousedown = (e, block, index) => {\r\n        if (previewRef.value) return;\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        //block上我们规划一个属性focus获取焦点后就将focus变成true\r\n        if (e.shiftKey) {\r\n            if (focusData.value.focus.length <= 1) {\r\n                block.focus = true//当前只有一个节点被选中时 摁住shift键也不会focus状态\r\n            } else {\r\n                block.focus = !block.focus\r\n            }\r\n        } else {\r\n            if (!block.focus) {\r\n                clearBlockFocus()\r\n                block.focus = true//要清空其他的focus属性\r\n            } //当自己已经被选中了，再次点击时还是选中状态\r\n        }\r\n        selectIndex.value = index\r\n        callback(e)\r\n    }\r\n\r\n    return {\r\n        blockMousedown,\r\n        containerMousedown,\r\n        focusData,\r\n        lastSelectBlock,\r\n        clearBlockFocus\r\n    }\r\n}","import { reactive } from \"vue\";\r\nimport { events } from \"./events\";\r\nexport function useBlockDragger(focusData, lastSelectBlock, data) {\r\n    //实现获取焦点\r\n    let dragState = {\r\n        startX: 0,\r\n        startY: 0,\r\n        dragging: false,//默认不是正在拖拽\r\n    }\r\n    let markLine = reactive({\r\n        x: null,\r\n        y: null\r\n    })\r\n    // 按下鼠标，获取初始值和选中的位置\r\n    const mousedown = (e) => {\r\n        const { width: BWidth, height: BHeight } = lastSelectBlock.value\r\n        dragState = {\r\n            startX: e.clientX,\r\n            startY: e.clientY, // 记录每一个选中的位置\r\n            startLeft: lastSelectBlock.value.left, // b点拖拽前的位置 left和top\r\n            startTop: lastSelectBlock.value.top,\r\n            dragging: false,\r\n            startPos: focusData.value.focus.map(({ top, left }) => ({ top, left })),\r\n            lines: (() => {\r\n                const { unfocused } = focusData.value // 获取其他没有选中的以及它们的位置坐辅助线\r\n                let lines = { // 计算横线的位置用y来存放 x存放的是纵向\r\n                    x: [],\r\n                    y: []\r\n                };\r\n                [...unfocused,\r\n                {\r\n                    top: 0,\r\n                    left: 0,\r\n                    width: data.value.container.width,\r\n                    height: data.value.container.height\r\n                }].forEach((block) => {\r\n                    const { top: ATop, left: ALeft, width: AWidth, height: AHeight } = block;\r\n                    // 当此元素拖拽到和A元素top一致的时候，要显示这根辅助线，辅助线的位置就是ATop\r\n                    lines.y.push({ showTop: ATop, top: ATop })\r\n                    lines.y.push({ showTop: ATop, top: ATop - BHeight }) // 顶对底\r\n                    lines.y.push({ showTop: ATop + AHeight / 2, top: ATop + AHeight / 2 - BHeight / 2 }) // 中对中\r\n                    lines.y.push({ showTop: ATop + AHeight, top: ATop + AHeight }) // 底对顶\r\n                    lines.y.push({ showTop: ATop + AHeight, top: ATop + AHeight - BHeight }); // 底对底\r\n                    lines.x.push({ showLeft: ALeft, left: ALeft }) // 左对左边\r\n                    lines.x.push({ showLeft: ALeft + AWidth, left: ALeft + AWidth })// 右边对左边\r\n                    lines.x.push({ showLeft: ALeft + AWidth / 2, left: ALeft + AWidth / 2 - BWidth / 2 })\r\n                    lines.x.push({ showLeft: ALeft + AWidth, left: ALeft + AWidth - BWidth })\r\n                    lines.x.push({ showLeft: ALeft, left: ALeft - BWidth }) // 左对右\r\n                });\r\n                return lines\r\n            })()\r\n        }\r\n        document.addEventListener('mousemove', mousemove)\r\n        document.addEventListener('mouseup', mouseup)\r\n    }\r\n    const mousemove = (e) => {\r\n        let { clientX: moveX, clientY: moveY } = e\r\n        if (!dragState.dragging) {\r\n            dragState.dragging = true,\r\n                events.emit('start'); // 触发事件就会记住拖拽前的位置\r\n        }\r\n\r\n        // 计算当前元素最新的left和top去线里面找，找到显示线\r\n        // 鼠标移动后 - 鼠标移动前 + left\r\n        let left = moveX - dragState.startX + dragState.startLeft\r\n        let top = moveY - dragState.startY + dragState.startTop\r\n\r\n        // 先计算横线 距离参照物元素还有5px的时候，显示\r\n        let y = null\r\n        let x = null\r\n        for (let i = 0; i < dragState.lines.y.length; i++) {\r\n            const { top: t, showTop: s } = dragState.lines.y[i]\r\n            if (Math.abs(t - top) < 5) { // 小于5说明接近了\r\n                y = s // 线要实现的位置\r\n                moveY = dragState.startY - dragState.startTop + t // 容器距离顶部的距离 + 目标的高度 就是最新的moveY\r\n                // 实现快速和这个元素贴在一起\r\n                break // 找到一根线后就跳出循环\r\n            }\r\n        }\r\n        for (let i = 0; i < dragState.lines.x.length; i++) {\r\n            const { left: l, showLeft: s } = dragState.lines.x[i]\r\n            if (Math.abs(l - left) < 5) { // 小于5说明接近了\r\n                x = s // 线要实现的位置\r\n                moveX = dragState.startX - dragState.startLeft + l // 容器距离顶部的距离 + 目标的高度 就是最新的moveY\r\n                // 实现快速和这个元素贴在一起\r\n                break // 找到一根线后就跳出循环\r\n            }\r\n        }\r\n\r\n        markLine.x = x // markLine 是一个响应式数据 x, y更新会导致视图更新\r\n        markLine.y = y\r\n        let durX = moveX - dragState.startX\r\n        let durY = moveY - dragState.startY\r\n        focusData.value.focus.forEach((block, idx) => {\r\n            block.top = dragState.startPos[idx].top + durY\r\n            block.left = dragState.startPos[idx].left + durX\r\n        })\r\n    }\r\n    const mouseup = (e) => {\r\n        document.removeEventListener('mousemove', mousemove)\r\n        document.removeEventListener('mouseup', mouseup)\r\n        markLine.x = null\r\n        markLine.y = null\r\n        if (dragState.dragging) { // 如果只是点击就不会触发\r\n            events.emit('end');\r\n        }\r\n    }\r\n\r\n    return { mousedown, markLine }\r\n}","import deepcopy from \"deepcopy\";\r\nimport { onUnmounted } from \"vue\";\r\nimport { events } from \"./events\";\r\nimport { ElMessage } from 'element-plus'\r\nexport function useCommand(data, focusData) {\r\n    const state = { // 前进后退需要指针\r\n        current: -1, // 前进后退的索引值\r\n        queue: [], //  存放所有的操作命令\r\n        commands: {}, // 制作命令和执行功能一个映射表  undo : ()=>{}  redo:()=>{}\r\n        commandArray: [], // 存放所有的命令\r\n        destroyArray: [],//销毁\r\n    }\r\n    const registry = (command) => {\r\n        state.commandArray.push(command);\r\n        state.commands[command.name] = (...args) => { // 命令名字对应执行函数\r\n            const { redo, undo } = command.execute(...args);\r\n            redo();\r\n            if (!command.pushQueue) { // 不需要放到队列中直接跳过即可\r\n                return\r\n            }\r\n            let { queue, current } = state;\r\n\r\n            // 如果先放了 组件1 -》 组件2 => 组件3 =》 组件4 - -》 组件3\r\n            // 组件1 -> 组件3\r\n            if (queue.length > 0) {\r\n                queue = queue.slice(0, current + 1); // 可能在放置的过程中有撤销操作，所以根据当前最新的current值来计算新的对了\r\n                state.queue = queue;\r\n            }\r\n            queue.push({ redo, undo }); // 保存指令的前进后退\r\n            state.current = current + 1;\r\n            console.log(queue);\r\n        }\r\n    }\r\n    // 注册需要的命令\r\n    registry({//还原操作\r\n        name: 'redo',\r\n        keyboard: 'ctrl+y',\r\n        execute() {\r\n            return {\r\n                redo() {\r\n                    console.log(state.current)\r\n                    console.log(state.queue.length)\r\n                    if (state.current == -1 || state.current == state.queue.length - 1) {\r\n                        ElMessage({\r\n                            showClose: true,\r\n                            message: '没有可以还原的内容了!',\r\n                            type: 'warning',\r\n                        })\r\n                        return\r\n                    }; // 没有可以还原的了\r\n                    let item = state.queue[state.current + 1] // 找到当前的下一步还原操作\r\n                    if (item) {\r\n                        item.redo && item.redo()\r\n                        state.current++\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    })\r\n    registry({//撤销操作\r\n        name: 'undo',\r\n        keyboard: 'ctrl+z',\r\n        execute() {\r\n            return {\r\n                redo() {\r\n                    if (state.current == -1) {\r\n                        ElMessage({\r\n                            showClose: true,\r\n                            message: '没有可以撤销的内容了!',\r\n                            type: 'warning',\r\n                        })\r\n                        return\r\n                    }; // 没有可以撤销的了\r\n                    let item = state.queue[state.current] // 找到上一步还原\r\n                    if (item) {\r\n                        item.undo && item.undo()// 这里没有操作队列\r\n                        state.current--\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    })\r\n    registry({ // 如果希望将操作放到队列中可以增加一个属性 标识等会操作要放到队列中\r\n        name: 'drag',\r\n        pushQueue: true,\r\n        init() { // 初始化操作 默认就会执行\r\n            this.before = null\r\n            // 监控拖拽开始事件，保存状态\r\n            const start = () => {\r\n                this.before = deepcopy(data.value.blocks)\r\n            }\r\n            // 拖拽之后需要触发对应的指令\r\n            const end = () => {\r\n                state.commands.drag()\r\n            }\r\n            events.on('start', start)\r\n            events.on('end', end)\r\n            return () => {\r\n                events.off('start', start);\r\n                events.off('end', end)\r\n            }\r\n        },\r\n        execute() { // state.commands.drag()\r\n            let before = this.before;\r\n            let after = data.value.blocks // 之后的状态\r\n            return {\r\n                redo() { // 默认一松手 就直接把当前事情做了\r\n                    data.value = { ...data.value, blocks: after }\r\n                },\r\n                undo() { // 前一步的\r\n                    data.value = { ...data.value, blocks: before }\r\n                }\r\n            }\r\n        }\r\n    })\r\n\r\n    registry({// 删除操作\r\n        name: 'delete', // 删除\r\n        pushQueue: true,\r\n        execute() {\r\n            let state = {\r\n                before: deepcopy(data.value.blocks), // 当前的值\r\n                after: focusData.value.unfocused// 选中的都删除了 留下的都是没选中的\r\n            }\r\n            return {\r\n                redo: () => {\r\n                    if (focusData.value.focus.length == 0 && focusData.value.unfocused.length == 0) {\r\n                        ElMessage({\r\n                            showClose: true,\r\n                            message: '没有可以删除的内容了!',\r\n                            type: 'warning',\r\n                        })\r\n                        return\r\n                    } else if (focusData.value.focus.length == 0) {\r\n                        ElMessage({\r\n                            showClose: true,\r\n                            message: '还没选中需要删除的内容呢!',\r\n                            type: 'warning',\r\n                        })\r\n                        return\r\n                    }\r\n                    else {\r\n                        data.value = { ...data.value, blocks: state.after }\r\n                    }\r\n                },\r\n                undo: () => {\r\n                    data.value = { ...data.value, blocks: state.before }\r\n                }\r\n            }\r\n        }\r\n    })\r\n    registry({// 清空画布操作\r\n        name: 'deleteAll', // 删除\r\n        pushQueue: true,\r\n        execute() {\r\n            let state = {\r\n                before: deepcopy(data.value.blocks), // 当前的值\r\n                after: []\r\n            }\r\n            return {\r\n                redo: () => {\r\n                    if (focusData.value.focus.length == 0 && focusData.value.unfocused.length == 0) {\r\n                        ElMessage({\r\n                            showClose: true,\r\n                            message: '没有可以清空的内容了!',\r\n                            type: 'warning',\r\n                        })\r\n                        return\r\n                    }\r\n                    else {\r\n                        data.value = { ...data.value, blocks: state.after }\r\n                    }\r\n                },\r\n                undo: () => {\r\n                    data.value = { ...data.value, blocks: state.before }\r\n                }\r\n            }\r\n        }\r\n    })\r\n\r\n    // 带有历史记录常用的模式 \r\n    registry({\r\n        name: 'updateContainer', // 更新整个容器\r\n        pushQueue: true,\r\n        execute(newValue) {\r\n            let state = {\r\n                before: data.value, // 当前的值\r\n                after: newValue // 新值\r\n            }\r\n            return {\r\n                redo: () => {\r\n                    data.value = state.after\r\n                },\r\n                undo: () => {\r\n                    data.value = state.before\r\n                }\r\n            }\r\n        }\r\n    })\r\n\r\n    registry({\r\n        name: 'updateBlock', // 更新某个组件\r\n        pushQueue: true,\r\n        execute(newBlock, oldBlock) {\r\n            let state = {\r\n                before: data.value.blocks,\r\n\r\n                after: (() => {\r\n                    let blocks = [...data.value.blocks] // 拷贝一份用于新的block\r\n                    const index = data.value.blocks.indexOf(oldBlock) // 找老的 需要通过老的查找\r\n                    if (index > -1) {\r\n                        blocks.splice(index, 1, newBlock)\r\n                    }\r\n                    return blocks\r\n                })()\r\n            }\r\n            return {\r\n                redo: () => {\r\n                    data.value = { ...data.value, blocks: state.after }\r\n                    console.log(data.value)\r\n                },\r\n                undo: () => {\r\n                    data.value = { ...data.value, blocks: state.before }\r\n                    console.log(data.value)\r\n                }\r\n            }\r\n        }\r\n    })\r\n\r\n    const keyboardEvent = (() => {\r\n        const keyCodes = {\r\n            90: 'z',\r\n            89: 'y'\r\n        }\r\n        const onKeydown = (e) => {\r\n            const { ctrlKey, keyCode } = e// ctrl+z  / ctrl+y\r\n            let keyString = []\r\n            if (ctrlKey) keyString.push('ctrl')\r\n            keyString.push(keyCodes[keyCode])\r\n            keyString = keyString.join('+')\r\n\r\n            state.commandArray.forEach(({ keyboard, name }) => {\r\n                if (!keyboard) return; // 没有键盘事件\r\n                if (keyboard === keyString) {\r\n                    state.commands[name]()\r\n                    e.preventDefault()\r\n                }\r\n            })\r\n        }\r\n        const init = () => { // 初始化事件\r\n            window.addEventListener('keydown', onKeydown)\r\n            return () => { // 销毁事件\r\n                window.removeEventListener('keydown', onKeydown)\r\n            }\r\n        }\r\n        return init\r\n    })()\r\n        //匿名函数（立即执行函数）\r\n        ; (() => {\r\n            // 监听键盘事件\r\n            state.destroyArray.push(keyboardEvent())\r\n            state.commandArray.forEach(command => command.init && state.destroyArray.push(command.init()))\r\n        })()\r\n\r\n    onUnmounted(() => { // 清理绑定的事件\r\n        state.destroyArray.forEach(fn => fn && fn())\r\n    })\r\n    return state\r\n}","import { ElDialog, ElButton, ElInput } from \"element-plus\";\r\nimport { createVNode, defineComponent, reactive, render } from \"vue\";\r\n\r\nconst DialogComponent = defineComponent({\r\n    props: {\r\n        option: { type: Object }\r\n    },\r\n    setup(props, ctx) {\r\n        const state = reactive({\r\n            option: props.option, // 用户给组件的属性\r\n            isShow: false\r\n        })\r\n        ctx.expose({ // 让外界可以调用组件的方法\r\n            showDialog(option) {\r\n                state.option = option;\r\n                state.isShow = true;\r\n            }\r\n        });\r\n        const onCancel = () => {\r\n            state.isShow = false;\r\n        }\r\n        const onConfirm = () => {\r\n            state.isShow = false;\r\n            state.option.onConfirm && state.option.onConfirm(state.option.content)\r\n        }\r\n        return () => {\r\n            return <ElDialog v-model={state.isShow} title={state.option.title}>\r\n                {{\r\n                    default: () => <ElInput\r\n                        type=\"textarea\"\r\n                        v-model={state.option.content}\r\n                        rows={10}\r\n                    ></ElInput>,\r\n                    footer: () => state.option.footer && <div>\r\n                        <ElButton onClick={onCancel}>取消</ElButton>\r\n                        <ElButton type=\"primary\" onClick={onConfirm}>确定</ElButton>\r\n                    </div>\r\n                }}\r\n            </ElDialog>\r\n        }\r\n    }\r\n})\r\nlet vm;\r\nexport function $dialog(option) {\r\n    // 手动挂载组件   new SubComponent.$mount()\r\n    if (!vm) {\r\n        let el = document.createElement('div');\r\n        vm = createVNode(DialogComponent, { option }); // 将组件渲染成虚拟节点\r\n\r\n        // 这里需要将el 渲染到我们的页面中\r\n        document.body.appendChild((render(vm, el), el)) // 渲染成真实节点扔到页面中\r\n    }\r\n    // 将组件渲染到这个el元素上\r\n    let { showDialog } = vm.component.exposed\r\n    showDialog(option); // 其他说明组件已经有了只需要显示出来即可\r\n}","import { defineComponent, inject, watch, reactive, provide } from \"vue\";\r\nimport { ElForm, ElFormItem, ElButton, ElInputNumber, ElColorPicker, ElSelect, ElOption, ElInput, ElUpload, ElImage, ElMessage } from 'element-plus'\r\nimport deepcopy from \"deepcopy\"\r\nimport './editor.scss'\r\nimport { events } from \"./events\";\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        block: { type: Object }, // 用户最后选中的元素\r\n        data: { type: Object }, // 当前所有的数据\r\n        updateContainer: { type: Function },//更改容器的数据\r\n        updateBlock: { type: Function },//更改组件的数据\r\n    },\r\n    setup(props, ctx) {\r\n        const config = inject('config')// 组件的配置信息\r\n        const state = reactive({\r\n            editData: {}\r\n        })\r\n\r\n        let AUDIO = ''\r\n        //保存视频\r\n        const updateFace = (e) => {\r\n            const file = e.target.files[0] || e.dataTransfer.files[0]\r\n\r\n            // //转换成base64码\r\n            // let reader = new FileReader()\r\n            // reader.readAsDataURL(file)\r\n            // reader.onload = () => {\r\n            //   AUDIO = reader.result\r\n            //   console.log(props.data,\"block\")\r\n            //   state.editData.props.filePath = AUDIO\r\n            //   // console.log(AUDIO,'地址')\r\n            // }\r\n            let URL = window.URL || window.webkitURL\r\n            AUDIO = URL.createObjectURL(file)\r\n            state.editData.props.filePath = AUDIO\r\n            console.log(state.editData.props, '地址')\r\n        }\r\n\r\n        //重置\r\n        const reset = () => {\r\n            if (!props.block) { // 说明要绑定的是容器的宽度和高度\r\n                state.editData = deepcopy(props.data.container)\r\n            } else {\r\n                state.editData = deepcopy(props.block)\r\n                //console.log(props.block)\r\n            }\r\n        }\r\n        //应用按钮点击事件\r\n        const apply = () => {\r\n            if (!props.block) { // 更改组件容器的大小\r\n                props.updateContainer({ ...props.data, container: state.editData })\r\n            } else { // 更改组件的配置\r\n                props.updateBlock(state.editData, props.block),\r\n                    events.emit(\"blocksize\", { ...state.editData })\r\n            }\r\n            console.log(state.editData)\r\n\r\n        }\r\n        // 上传成功，获取返回的图片地址\r\n        const handleAvatarSuccess = (res, file) => {\r\n            state.editData.props['picture'] = URL.createObjectURL(file.raw)\r\n        }\r\n        // 上传前，限制的上传图片大小\r\n        const beforeAvatarUpload = (file) => {\r\n            const isJPG = file.type === 'image/jpeg';\r\n            const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n            if (!isJPG) {\r\n                this.$message.error('上传图片只能是 JPG 格式!');\r\n            }\r\n            if (!isLt2M) {\r\n                this.$message.error('上传图片大小不能超过 2MB!');\r\n            }\r\n            return isJPG && isLt2M;\r\n        }\r\n        //校验url地址\r\n        const checkUrl = (urlString) => {\r\n            var reg = /(http|ftp|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&amp;:/~\\+#]*[\\w\\-\\@?^=%&amp;/~\\+#])?/;\r\n            if (!reg.test('https://' + urlString)) {\r\n                props.block.props.correct = false\r\n            } else {\r\n                props.block.props.correct = true\r\n            }\r\n\r\n        }\r\n        //校验数字\r\n        const isNumber = (val) => {\r\n            var regPos = /^\\d+(\\.\\d+)?$/;\r\n            var regNeg = /^(-(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;\r\n            if (regPos.test(Number(val)) || regNeg.test(Number(val))) {\r\n                props.block.props.correctNum = true\r\n            } else {\r\n                props.block.props.correctNum = false\r\n            }\r\n        }\r\n        watch(() => props.block, reset, { immediate: true })\r\n        return () => {\r\n            let content = []\r\n            if (!props.block) {\r\n                content.push(<>\r\n                    <ElFormItem label=\"容器宽度\">\r\n                        <ElInputNumber controls-position=\"right\" style=\"width:400px\" v-model={state.editData.width}></ElInputNumber>\r\n                    </ElFormItem>\r\n                    <ElFormItem label=\"容器高度\">\r\n                        <ElInputNumber controls-position=\"right\" style=\"width:400px\" v-model={state.editData.height}></ElInputNumber>\r\n                    </ElFormItem>\r\n                </>)\r\n            } else {\r\n                let component = config.componentMap[props.block.key];\r\n                if (component && component.props) {\r\n                    content.push(Object.entries(component.props).map(([propName, propConfig]) => {\r\n                        return <ElFormItem label={propConfig.label}>\r\n                            {{\r\n                                input: () => (\r\n                                    <div>\r\n                                        <ElInput\r\n                                            style=\"width:230px\"\r\n                                            v-model={state.editData.props[propName]}\r\n                                            clearable\r\n                                        >\r\n                                        </ElInput>\r\n                                    </div>),\r\n                                inputNum: () => (\r\n                                    <div>\r\n                                        <ElInput\r\n                                            style=\"width:230px\"\r\n                                            v-model={state.editData.props[propName]}\r\n                                            clearable\r\n                                            onblur={() => isNumber(state.editData.props[propName])}\r\n                                        >\r\n                                        </ElInput>\r\n                                        <div class=\"showtip\" v-show={props.block.props.correctNum || props.block.props.correctNum == undefined ? false : true}>请输入数字</div>\r\n                                    </div>),\r\n                                color: () => <ElColorPicker v-model={state.editData.props[propName]}></ElColorPicker>,\r\n                                select: () => <ElSelect style=\"width:400px\" v-model={state.editData.props[propName]}>\r\n                                    {propConfig.options.map(opt => {\r\n                                        return <ElOption label={opt.label} value={opt.value}></ElOption>\r\n                                    })}\r\n                                </ElSelect>,\r\n                                link: () => (\r\n                                    <div>\r\n                                        <div id=\"prepend\">\r\n                                            <div>Https://</div>\r\n                                            <ElInput\r\n                                                v-model={state.editData.props[propName]}\r\n                                                style=\"width:180px\"\r\n                                                clearable\r\n                                                onblur={() => checkUrl(state.editData.props[propName])}\r\n                                            ></ElInput>\r\n                                        </div>\r\n                                        <div class=\"showtip\" v-show={props.block.props.correct || props.block.props.correct == undefined ? false : true}>请输入正确的url地址</div>\r\n                                    </div>),\r\n                                picture: () =>\r\n                                    <ElUpload\r\n                                        //此处的接口为网上开放接口，已在vue.config.js文件中配置跨域代理\r\n                                        action=\"/dev-api/admin/product/fileUpload\"\r\n                                        show-file-list={false}\r\n                                        on-success={handleAvatarSuccess}\r\n                                        before-upload={beforeAvatarUpload}\r\n                                        v-model={state.editData.props[propName]}\r\n                                        limit={1}\r\n                                    >\r\n                                        <div class=\"uploader-box\">\r\n                                            <ElImage v-show={state.editData.props['picture']} src={state.editData.props['picture']} class=\"avatar\"></ElImage>\r\n                                            <ElButton type=\"success\" >{!state.editData.props['picture'] ? '点击上传' : '点击替换'}</ElButton>\r\n                                        </div>\r\n\r\n                                    </ElUpload>,\r\n                                file: () =>\r\n                                    <div>\r\n                                        <input class=\"file\" type=\"file\" accept=\"video/*\" onchange={updateFace} ></input>\r\n                                        {/* <video class=\"video\" src={AUDIO} controls></video> */}\r\n                                        {/* <button onClick={console.log(AUDIO,'onclick')}>删除视频</button> */}\r\n                                    </div>\r\n\r\n                            }[propConfig.type]()}\r\n                        </ElFormItem >\r\n\r\n                    }))\r\n                }\r\n                if (component && component.model) {\r\n                    //                                                 default   标签名\r\n                    content.push(Object.entries(component.model).map(([modelName, label]) => {\r\n                        return <ElFormItem label={label}>\r\n                            <ElInput v-model={state.editData.model[modelName]}></ElInput>\r\n                        </ElFormItem>\r\n                    }))\r\n                }\r\n            }\r\n\r\n\r\n            return <ElForm labelPosition=\"top\" style=\"padding:30px\" >\r\n                {content}\r\n                <ElFormItem>\r\n                    <ElButton type=\"primary\" onClick={() => apply()} >应用</ElButton>\r\n                    <ElButton onClick={reset} >重置</ElButton>\r\n                </ElFormItem>\r\n            </ElForm>\r\n        }\r\n    }\r\n})","import { defineComponent, inject, watch, reactive } from \"vue\";\r\nimport { ElForm, ElFormItem, ElButton, ElInput, ElCollapse, ElCollapseItem } from 'element-plus'\r\nimport deepcopy from \"deepcopy\"\r\nimport './editor.scss'\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        block: { type: Object }, // 用户最后选中的元素\r\n        data: { type: Object }, // 当前所有的数据\r\n        updateContainer: { type: Function },//更改容器的数据\r\n        updateBlock: { type: Function },//更改组件的数据\r\n    },\r\n    setup(props, ctx) {\r\n        console.log(props)\r\n        const config = inject('config')// 组件的配置信息\r\n        const state = reactive({\r\n            editData: {}\r\n        })\r\n        //重置\r\n        const reset = () => {\r\n            if (props.block) {\r\n                state.editData = deepcopy(props.block)\r\n            }\r\n        }\r\n        //应用按钮点击事件\r\n        const apply = () => {\r\n            if (props.block) {\r\n                props.updateBlock(state.editData, props.block)\r\n            }\r\n            console.log(state.editData)\r\n\r\n        }\r\n        watch(() => props.block, reset, { immediate: true })\r\n        return () => {\r\n            let content = []\r\n            if (props.block) {\r\n                let component = config.componentMap[props.block.key];\r\n                if (component && component.events) {\r\n                    content.push(Object.entries(component.events).map(([propName, propConfig]) => {\r\n                        return <div class=\"collapsebox\">\r\n                            <ElCollapse >\r\n                                <ElCollapseItem title={propConfig.label}>\r\n                                    <div >\r\n                                        {/* <div class=\"dialog-font\">触发条件：</div>\r\n                                        <ElRadioGroup style=\"float:left\" v-model={state.editData.events['mousetype']}>\r\n                                            <ElRadio label=\"single\" size=\"large\">鼠标单击</ElRadio>\r\n                                            <ElRadio label=\"double\" size=\"large\">鼠标双击</ElRadio>\r\n                                        </ElRadioGroup> */}\r\n                                        <div class=\"dialog-font\" >{propConfig.title}</div>\r\n                                        <ElInput type=\"textarea\"\r\n                                            placeholder={propConfig.hint}\r\n                                            v-model={state.editData.events[propConfig.key]}\r\n                                            onblur={() => checkUrl(state.editData.props[propName])}\r\n                                            disabled={component.lable == '输入框' || component.lable == '链接' || component.lable == '音频播放器' ? true : false}\r\n                                        >\r\n                                        </ElInput>\r\n                                        <ElFormItem style=\"padding-top:15px; float: left;\" >\r\n                                            <ElButton type=\"primary\"\r\n                                                disabled={component.lable == '输入框' || component.lable == '链接' || component.lable == '音频播放器' ? true : false}\r\n                                                onClick={() => apply()} >添加</ElButton>\r\n                                            <ElButton\r\n                                                disabled={component.lable == '输入框' || component.lable == '链接' || component.lable == '音频播放器' ? true : false}\r\n                                                onClick={reset}>重置</ElButton>\r\n                                        </ElFormItem>\r\n                                    </div>\r\n                                </ElCollapseItem>\r\n                            </ElCollapse>\r\n                        </div>\r\n\r\n                    }))\r\n                }\r\n            }\r\n\r\n\r\n            return <ElForm labelPosition=\"top\" style=\"padding:30px\" >\r\n                {content}\r\n            </ElForm>\r\n        }\r\n    }\r\n})","import { computed, defineComponent, inject, ref } from \"vue\";\r\nimport './editor.scss'\r\nimport editorBlock from \"./editor-block\";\r\nimport deepcopy from \"deepcopy\";\r\nimport { useMenuDragger } from \"./useMenuDragger\";\r\nimport { useFocus } from \"./useFocus\";\r\nimport { useBlockDragger } from \"./useBlockDragger\";\r\nimport { useCommand } from \"./useCommand\";\r\nimport { $dialog } from \"../components/Dialog\";\r\nimport { ElButton, ElCard, ElTabs, ElTabPane, ElIcon, ElTooltip } from 'element-plus';\r\nimport EditorOperator from \"./editor-operator\";\r\nimport EditorEvent from \"./editor-event\";\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        modelValue: { type: Object },\r\n        formData: { type: Object }\r\n    },\r\n    components: {\r\n        editorBlock,\r\n        ElButton,\r\n        ElCard,\r\n        EditorOperator\r\n    },\r\n    //要触发的事件\r\n    emits: ['update:modelValue'],\r\n\r\n    setup(props, ctx) {\r\n        console.log(props)\r\n        // 预览的时候 内容不能在操作了 ，可以点击 输入内容 方便看效果\r\n        const previewRef = ref(false);\r\n        const data = computed({\r\n            get() {\r\n                return props.modelValue\r\n            },\r\n            set(newValue) {\r\n                ctx.emit('update:modelValue', deepcopy(newValue))\r\n            }\r\n        });\r\n        //内容区大小\r\n        const containerStyles = computed(() => ({\r\n            width: data.value.container.width + 'px',\r\n            height: data.value.container.height + 'px'\r\n        }))\r\n        const config = inject('config')\r\n\r\n        const containerRef = ref(null);\r\n        // 1.实现菜单的拖拽功能\r\n        const { dragstart, dragend } = useMenuDragger(containerRef, data);\r\n\r\n        // 2.实现获取焦点 选中后可能直接就进行拖拽了\r\n        let {\r\n            blockMousedown,\r\n            focusData,\r\n            containerMousedown,\r\n            lastSelectBlock, clearBlockFocus\r\n        } = useFocus(data, previewRef, (e) => {\r\n            // 获取焦点后进行拖拽\r\n            mousedown(e)\r\n        });\r\n        // 2.实现组件拖拽\r\n        let { mousedown, markLine } = useBlockDragger(focusData, lastSelectBlock, data);\r\n\r\n        const { commands } = useCommand(data, focusData); // 引入\r\n        const buttons = [\r\n\r\n            { label: '撤销', handler: () => commands.undo() },\r\n            { label: '还原', handler: () => commands.redo() },\r\n            {\r\n                label: '导出', handler: () => {\r\n                    $dialog({\r\n                        title: '导出json使用',\r\n                        content: JSON.stringify(data.value),\r\n                    })\r\n                }\r\n            },\r\n            { label: '删除选中', handler: () => commands.delete() },\r\n            { label: '清空画布', handler: () => commands.deleteAll() },\r\n            {\r\n\r\n                label: '预览', handler: () => {\r\n                    previewRef.value = !previewRef.value;\r\n                    clearBlockFocus();\r\n                }\r\n            },\r\n        ]\r\n        //主题色\r\n        const allColorStyle = [\r\n            {\r\n                label: '机器',\r\n                value: ['#061D75', '#E2E4E7', '#878584']\r\n            },\r\n            {\r\n                label: '反常',\r\n                value: ['#4C5C40', '#727989', '#D8AE4B']\r\n            },\r\n            {\r\n                label: '孤独',\r\n                value: ['#1D3851', '#4A6683', '#D7941D']\r\n            },\r\n            {\r\n                label: '母亲',\r\n                value: ['#AB9281', '#717588', '#C1962E']\r\n            },\r\n            {\r\n                label: '特立独行',\r\n                value: ['#154599', '#918081', '#E5CAB9']\r\n            },\r\n            {\r\n                label: '存活',\r\n                value: ['#925235', '#BCBAB0', '#D8AE4B']\r\n            },\r\n            {\r\n                label: '作者',\r\n                value: ['#58666B', '#5E7B8E', '#B74325']\r\n            },\r\n            {\r\n                label: '可燃',\r\n                value: ['#7B7066', '#617995', '#B15B17']\r\n            },\r\n            {\r\n                label: '无题',\r\n                value: ['#A69D9C', '#5D6E7F', '#D8AE48']\r\n            },\r\n            {\r\n                label: '反重力',\r\n                value: ['#4B5365', '#7C6866', '#CD8921']\r\n            },\r\n            {\r\n                label: '素衣化缁',\r\n                value: ['#111', '#636363', '#858586']\r\n            },\r\n            {\r\n                label: '白蔷薇',\r\n                value: ['#151E17', '#CAE0E5', '#656E59']\r\n            },\r\n            {\r\n                label: '绿水青山',\r\n                value: ['#2E3A35', '#948947', '#244140']\r\n            },\r\n            {\r\n                label: '日暮',\r\n                value: ['#3A454B', '#FF5100', '#AC6D46']\r\n            },\r\n            {\r\n                label: '彤云密布',\r\n                value: ['#FEEDE3', '#EDCBB8', '#025E7D']\r\n            },\r\n            {\r\n                label: '仙鹤',\r\n                value: ['#FEFCFC', '#C77C83', '#252D27']\r\n            },\r\n        ]\r\n        //修改主题色\r\n        const changecolorstyle = function () {\r\n            let select = document.getElementById(\"sel\");\r\n            let val = select.selectedOptions[0]._value;\r\n            console.dir(select.selectedOptions[0]._value);\r\n            const root = document.querySelector(\":root\");\r\n            // let darkColor = getComputedStyle(root).getPropertyValue(\"--darkColor\");\r\n            // let midColor = getComputedStyle(root).getPropertyValue(\"--midColor\");\r\n            // let lightColor = getComputedStyle(root).getPropertyValue(\"--lightColor\");\r\n            root.style.setProperty(\"--darkColor\", val[0]);\r\n            root.style.setProperty(\"--lightColor\", val[1]);\r\n            root.style.setProperty(\"--midColor\", val[2]);\r\n        }\r\n        return () =>\r\n            <div class=\"editor\">\r\n                <div class=\"editor-left\">\r\n                    {config.componentList.map(component => (\r\n                        <div class=\"editor-left-item\"\r\n                            draggable\r\n                            onDragstart={e => dragstart(e, component)}\r\n                            onDragend={dragend} >\r\n                            <span>{component.lable}</span>\r\n                            <div >{component.preview()}</div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n                <ElTooltip\r\n                    class=\"box-item\"\r\n                    effect=\"dark\"\r\n                    content=\"ctrl+y 还原/  ctrl+z 撤销/  shift+左键 多选\"\r\n                    placement=\"left\"\r\n                >\r\n                    <ElIcon size={30} class=\"editor-icon\"><InfoFilled /></ElIcon>\r\n                </ElTooltip>\r\n                <div class=\"editor-top\">\r\n                    {buttons.map((btn, index) => {\r\n                        const label =\r\n                            typeof btn.label == 'function' ? btn.label() : btn.label\r\n                        return (\r\n                            <el-button plain class=\"editor-top-button\" onClick={btn.handler}>\r\n                                <span>{label}</span>\r\n                            </el-button >)\r\n                    })}\r\n                    <div class=\"changeColor-select\">\r\n                        <span>主题色：</span>\r\n                        <select id=\"sel\" onChange={changecolorstyle}>\r\n                            {allColorStyle.map((item, index) => {\r\n                                return (\r\n                                    <option key={index} value={item.value}>\r\n                                        {item.label}\r\n                                    </option>\r\n                                );\r\n                            })}\r\n\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class=\"editor-right\">\r\n                    <div class=\"editor-right-title\">\r\n                        {/**根据最后是否有选中组件，选择呈现内容 ElTabPane内不能使用v-show/if */}\r\n                        <ElTabs type=\"border-card\" stretch={true} v-show={lastSelectBlock.value == undefined}>\r\n                            <ElTabPane label=\"画布属性\" class=\"editor-right-title-box\">\r\n                                <EditorOperator\r\n                                    block={lastSelectBlock.value}\r\n                                    data={data.value}\r\n                                    updateContainer={commands.updateContainer}\r\n                                    updateBlock={commands.updateBlock}\r\n                                    style=\"padding:0px;\"\r\n                                ></EditorOperator>\r\n                            </ElTabPane>\r\n                        </ElTabs>\r\n                        <ElTabs type=\"border-card\" stretch={true} v-show={lastSelectBlock.value != undefined}>\r\n                            <ElTabPane label=\"属性\" class=\"editor-right-title-box\">\r\n                                <EditorOperator\r\n                                    block={lastSelectBlock.value}\r\n                                    data={data.value}\r\n                                    updateContainer={commands.updateContainer}\r\n                                    updateBlock={commands.updateBlock}\r\n                                    style=\"padding:0px;\"\r\n                                ></EditorOperator>\r\n                            </ElTabPane>\r\n                            <ElTabPane label=\"事件\" class=\"editor-right-title-box\">\r\n                                <EditorEvent\r\n                                    block={lastSelectBlock.value}\r\n                                    data={data.value}\r\n                                    updateBlock={commands.updateBlock}\r\n                                    style=\"padding:0px;\"\r\n                                ></EditorEvent>\r\n                            </ElTabPane>\r\n                        </ElTabs>\r\n\r\n                    </div>\r\n                </div>\r\n                <div class=\"editor-container\">\r\n                    <div class=\"editor-container-canvas\">\r\n                        <div class=\"editor-container-canvas_content\"\r\n                            style={containerStyles.value}\r\n                            ref={containerRef}\r\n                            onMousedown={containerMousedown}>\r\n                            {\r\n                                (data.value.blocks.map((block, index) => (\r\n                                    <editorBlock\r\n                                        class={\r\n                                            [block.focus ? 'editor-block-focus' : '',\r\n                                            previewRef.value ? 'editor-block-preview' : '']}\r\n                                        block={block}\r\n                                        onMousedown={(e) => blockMousedown(e, block, index)}\r\n                                        formData={props.formData}\r\n                                    ></editorBlock>\r\n                                )))\r\n                            }\r\n                            {/*辅助线 */}\r\n                            {markLine.x !== null && <div class=\"line-x\" style={{ left: markLine.x + 'px' }}></div>}\r\n                            {markLine.y !== null && <div class=\"line-y\" style={{ top: markLine.y + 'px' }}></div>}\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class={previewRef.value ? 'bg' : 'editor-block-preview-bg'}>\r\n                    <div class=\"canvas-container\">\r\n                        {buttons.map((btn, index) => {\r\n                            return <el-button class=\"close\" type=\"danger\" round onClick={btn.handler} >关闭</el-button>\r\n                        })}\r\n                        <div class=\"canvas\"\r\n                            style={containerStyles.value}\r\n                            onMousedown={containerMousedown}>\r\n                            {\r\n                                (data.value.blocks.map((block, index) => (\r\n                                    <editorBlock\r\n                                        class={\r\n                                            [block.focus ? 'editor-block-focus' : '', previewRef.value ? 'editor-block-preview' : '']}\r\n                                        onMousedown={(e) => blockMousedown(e, block, index)}\r\n                                        block={block}\r\n                                        formData={props.formData}\r\n                                    ></editorBlock>\r\n                                )))\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div >\r\n\r\n    }\r\n})","//列表区可以显示所有的物料\r\n//key对应的组件映射关系\r\nimport { ElButton, ElInput, ElLink, ElIcon } from 'element-plus'\r\n//默认图片\r\nconst imgdata = require('@/assets/bg.jpg')\r\nfunction createEditorConfig() {\r\n    const componentList = []\r\n    const componentMap = {}\r\n    return {\r\n        componentList,\r\n        componentMap,\r\n        register: (component) => {\r\n            componentList.push(component);\r\n            componentMap[component.key] = component\r\n\r\n        }\r\n    }\r\n}\r\n// 自定义事件\r\nconst events = {\r\n    redirect(url) {\r\n        if (url) {\r\n            window.open('https://' + url, '_blank');\r\n        }\r\n    },\r\n\r\n    alert(msg) {\r\n        if (msg) {\r\n            alert(msg)\r\n        }\r\n    },\r\n}\r\n\r\nconst eventList = [\r\n    {\r\n        key: 'redirect',\r\n        label: 'url事件',\r\n        title: 'url地址',\r\n        hint: '请输入完整url地址',\r\n        event: events.redirect,\r\n    },\r\n    {\r\n        key: 'alert',\r\n        label: 'alert 事件',\r\n        title: '弹窗内容',\r\n        hint: '请输入内容',\r\n        event: events.alert\r\n    },\r\n]\r\nexport let registerConfig = createEditorConfig();\r\nconst createInputProp = (label) => ({ type: 'input', label })//工厂方法，复用\r\nconst createInputNumProp = (label) => ({ type: 'inputNum', label })\r\nconst createColorProp = (label) => ({ type: 'color', label })\r\nconst createSelectProp = (label, options) => ({ type: 'select', label, options })\r\nconst createAddressProp = (label) => ({ type: 'link', label })\r\nconst createPictureProp = (label) => ({ type: 'picture', label })\r\nconst createFileProp = (label) => ({ type: \"file\", accept: \"video/*\", label })\r\nregisterConfig.register({\r\n    lable: '文本',\r\n    preview: () => '预览文本',\r\n    render({ props, events }) {\r\n        if (\r\n            (events.redirect != undefined && events.alert != undefined) ||\r\n            (events.redirect != undefined && events.alert == undefined) ||\r\n            (events.redirect == undefined && events.alert != undefined)) {\r\n            return <span\r\n                style={{ color: props.color, fontSize: props.size + 'px' }}\r\n                onClick={() => this.handleClick(events.alert, events.redirect)}\r\n            >{props.text || '文本'}</span>\r\n        } else {\r\n            return <span\r\n                style={{ color: props.color, fontSize: props.size + 'px' }}\r\n            >{props.text || '文本'}</span>\r\n        }\r\n    },\r\n    key: 'text',\r\n    props: {\r\n        text: createInputProp('文本内容'),\r\n        color: createColorProp('字体颜色'),\r\n        size: createInputNumProp('字体大小/px'),\r\n\r\n    },\r\n    events: {\r\n        ...eventList\r\n    },\r\n    handleClick(alert, redirect) {\r\n        // 循环触发绑定的事件\r\n        Object.keys(events).forEach(event => {\r\n            if (event == 'alert') events['alert'](alert)\r\n            if (event == 'redirect') events['redirect'](redirect)\r\n        })\r\n    }\r\n\r\n})\r\n\r\nregisterConfig.register({\r\n    lable: '按钮',\r\n    preview: () => <ElButton>预览按钮</ElButton>,\r\n    resize: {\r\n        width: true,\r\n        height: true\r\n    },\r\n    render({ props, events, size }) {\r\n        if (\r\n            (events.redirect != undefined && events.alert != undefined) ||\r\n            (events.redirect != undefined && events.alert == undefined) ||\r\n            (events.redirect == undefined && events.alert != undefined)) {\r\n            return <ElButton\r\n                style={{ height: size.height + 'px', width: size.width + 'px', fontSize: props.fontsize + 'px' }}\r\n                type={props.type}\r\n                onClick={() => this.handleClick(events.alert, events.redirect)}\r\n                size={props.size}>{props.text || '按钮'}</ElButton>\r\n        } else {\r\n            return <ElButton style={{ height: size.height + 'px', width: size.width + 'px', fontSize: props.fontsize + 'px' }} type={props.type} size={props.size}>{props.text || '按钮'}</ElButton>\r\n        }\r\n    },\r\n    key: 'button',\r\n    props: {\r\n        text: createInputProp('按钮内容'),\r\n        fontsize: createInputNumProp('字体大小/px'),\r\n        type: createSelectProp('按钮类型', [\r\n            { label: '基础', value: 'primary' },\r\n            { label: '成功', value: 'success' },\r\n            { label: '警告', value: 'warning' },\r\n            { label: '危险', value: 'danger' },\r\n            { label: '文本', value: 'text' },\r\n        ]),\r\n        size: createSelectProp('按钮尺寸', [\r\n            { label: '默认', value: 'default' },\r\n            { label: '大', value: 'large' },\r\n            { label: '小', value: 'small' }\r\n        ])\r\n    },\r\n    events: {\r\n        ...eventList\r\n    },\r\n    handleClick(alert, redirect) {\r\n        // 循环触发绑定的事件\r\n        Object.keys(events).forEach(event => {\r\n            if (event == 'alert') events['alert'](alert)\r\n            if (event == 'redirect') events['redirect'](redirect)\r\n        })\r\n    }\r\n})\r\n\r\nregisterConfig.register({\r\n    lable: '输入框',\r\n    resize: {\r\n        width: true, // 更改输入框的横向大小\r\n    },\r\n    preview: () => <ElInput placeholder=\"预览输入框\" ></ElInput>,\r\n    render: ({ model, props, size }) => <ElInput placeholder={props.text == null ? '请输入内容' : props.text}  {...model.default} style={{ width: size.width + 'px' }}></ElInput>,\r\n    key: 'input',\r\n    model: {\r\n        default: '绑定字段'\r\n    },\r\n    props: {\r\n        text: createInputProp('提示信息'),\r\n    },\r\n    events: {\r\n        ...eventList\r\n    },\r\n    handleClick(alert, redirect) {\r\n        // 循环触发绑定的事件\r\n        Object.keys(events).forEach(event => {\r\n            if (event == 'alert') events['alert'](alert)\r\n            if (event == 'redirect') events['redirect'](redirect)\r\n        })\r\n    }\r\n})\r\n\r\nregisterConfig.register({\r\n    lable: '链接',\r\n    preview: () => <ElLink>预览链接</ElLink>,\r\n    render: ({ props }) => <ElLink type={props.type} underline={props.underline} disabled={props.disabled} href={'https:' + props.link} target=\"_blank\" style={{ fontSize: props.fontSize + 'px' }}>{props.text || '链接'}</ElLink>,\r\n    key: 'link',\r\n    props: {\r\n        text: createInputProp('链接名字'),\r\n        link: createAddressProp('链接地址'),\r\n        fontSize: createInputNumProp('字体大小/px'),\r\n        type: createSelectProp('链接类型', [\r\n            { label: '默认', value: 'default' },\r\n            { label: '基础', value: 'primary' },\r\n            { label: '成功', value: 'success' },\r\n            { label: '警告', value: 'warning' },\r\n            { label: '危险', value: 'danger' },\r\n            { label: '文本', value: 'info' },\r\n        ]),\r\n        underline: createSelectProp('是否下划线', [\r\n            { label: '是', value: true },\r\n            { label: '否', value: false },\r\n        ]),\r\n        disabled: createSelectProp('是否禁用', [\r\n            { label: '是', value: true },\r\n            { label: '否', value: false },\r\n        ]),\r\n    },\r\n    events: {\r\n        ...eventList\r\n    },\r\n    handleClick(alert, redirect) {\r\n        // 循环触发绑定的事件\r\n        Object.keys(events).forEach(event => {\r\n            if (event == 'alert') events['alert'](alert)\r\n            if (event == 'redirect') events['redirect'](redirect)\r\n        })\r\n    }\r\n})\r\nregisterConfig.register({\r\n    lable: '图片',\r\n    resize: {\r\n        width: true,\r\n        height: true\r\n    },\r\n    preview: () => <ElIcon size={30}> <PictureFilled /></ElIcon>,\r\n    render({ props, events, size }) {\r\n        if (\r\n            (events.redirect != undefined && events.alert != undefined) ||\r\n            (events.redirect != undefined && events.alert == undefined) ||\r\n            (events.redirect == undefined && events.alert != undefined)) {\r\n            return <img\r\n                src={props.picture ? props.picture : imgdata}\r\n                class=\"avatar\"\r\n                onClick={() => this.handleClick(events.alert, events.redirect)}\r\n                style={{ width: (size.width == undefined ? props.width : size.width + 'px'), height: (size.height == undefined ? props.height : size.height + 'px') }}\r\n            />\r\n        } else {\r\n            return <img\r\n                src={props.picture ? props.picture : imgdata}\r\n                class=\"avatar\"\r\n                style={{ width: (size.width == undefined ? props.width : size.width + 'px'), height: (size.height == undefined ? props.height : size.height + 'px') }}\r\n            />\r\n        }\r\n    },\r\n    key: 'picture',\r\n    props: {\r\n        height: createSelectProp(\"图片高度\", [\r\n            { label: \"50px\", value: \"50px\" },\r\n            { label: \"100px\", value: \"100px\" },\r\n            { label: \"150px\", value: \"150px\" },\r\n            { label: \"200px\", value: \"200px\" },\r\n            { label: \"250px\", value: \"250px\" },\r\n        ]),\r\n        width: createSelectProp(\"图片宽度\", [\r\n            { label: \"50px\", value: \"50px\" },\r\n            { label: \"100px\", value: \"100px\" },\r\n            { label: \"150px\", value: \"150px\" },\r\n            { label: \"200px\", value: \"200px\" },\r\n            { label: \"250px\", value: \"250px\" },\r\n        ]),\r\n        picture: createPictureProp('图片导入')\r\n    },\r\n    events: {\r\n        ...eventList\r\n    },\r\n    handleClick(alert, redirect) {\r\n        // 循环触发绑定的事件\r\n        Object.keys(events).forEach(event => {\r\n            if (event == 'alert') events['alert'](alert)\r\n            if (event == 'redirect') events['redirect'](redirect)\r\n        })\r\n    }\r\n})\r\nregisterConfig.register({\r\n    lable: \"音频播放器\",\r\n    resize: {\r\n        width: true,\r\n        height: true,\r\n    },\r\n    // preview: () => <video controls src=\"\" height=\"100\" width=\"200\"></video>,\r\n    preview: () => <ElIcon size={30}><VideoCameraFilled /></ElIcon>,\r\n    render: ({ props, size }) => (\r\n        //console.log(size.width, \"@!@!\"),\r\n        //console.log(props),\r\n        <video video\r\n            controls\r\n            src={props.filePath}\r\n            style={{ width: (size.width == undefined ? props.width : size.width + 'px'), height: (size.height == undefined ? props.height : size.height + 'px') }}\r\n        >\r\n            {props.filePath || \"视频渲染\"}\r\n        </video >\r\n    ),\r\n    key: \"video\",\r\n    props: {\r\n        height: createSelectProp(\"视频高度\", [\r\n            { label: \"50px\", value: \"50px\" },\r\n            { label: \"100px\", value: \"100px\" },\r\n            { label: \"150px\", value: \"150px\" },\r\n            { label: \"200px\", value: \"200px\" },\r\n            { label: \"250px\", value: \"250px\" },\r\n        ]),\r\n        width: createSelectProp(\"视频宽度\", [\r\n            { label: \"50px\", value: \"50px\" },\r\n            { label: \"100px\", value: \"100px\" },\r\n            { label: \"150px\", value: \"150px\" },\r\n            { label: \"200px\", value: \"200px\" },\r\n            { label: \"250px\", value: \"250px\" },\r\n        ]),\r\n        filePath: createFileProp(\"视频导入\")\r\n    },\r\n    events: {\r\n        ...eventList\r\n    },\r\n    handleClick(alert, redirect) {\r\n        // 循环触发绑定的事件\r\n        Object.keys(events).forEach(event => {\r\n            if (event == 'alert') events['alert'](alert)\r\n            if (event == 'redirect') events['redirect'](redirect)\r\n        })\r\n    }\r\n})","import { render } from \"./App.vue?vue&type=template&id=a42253fc\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=a42253fc&lang=scss\"\n\nimport exportComponent from \"D:\\\\Low-Code\\\\low_code\\\\LOW\\\\low-code\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\r\nimport 'element-plus/theme-chalk/index.css'\r\nimport App from './App.vue'\r\nimport * as ElementPlusIconsVue from '@element-plus/icons-vue'\r\n//全局注册icon图标\r\nconst app = createApp(App)\r\nfor (const [key, component] of Object.entries(ElementPlusIconsVue)) {\r\n    app.component(key, component)\r\n}\r\napp.mount('#app')\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunklow_code\"] = self[\"webpackChunklow_code\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(2667); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["class","_createElementBlock","_createVNode","_component_Editor","$setup","$event","formData","defineComponent","props","block","type","Object","component","setup","ctx","width","height","resize","data","onmousemove","e","clientX","clientY","startX","startY","startWidth","startHeight","startLeft","startTop","direction","horizontal","vertical","durX","durY","top","left","hasResize","onmouseup","console","log","document","body","removeEventListener","onmousedown","stopPropagation","addEventListener","events","mitt","blockStyles","computed","zIndex","config","inject","blockRef","ref","onMounted","offsetWidth","offsetHeight","value","alignCenter","getblocksize","Promise","resolve","reject","on","msg","then","pwidth","Number","String","split","pheight","componentMap","key","RenderComponent","render","size","model","keys","reduce","prev","modelName","propName","modelValue","v","focus","useMenuDragger","containerRef","currentComponent","dragenter","dataTransfer","dropEffect","dragover","preventDefault","dragleave","drop","blocks","offsetY","offsetX","dragstart","emit","dragend","useFocus","previewRef","callback","selectIndex","lastSelectBlock","focusData","unfocused","forEach","push","clearBlockFocus","containerMousedown","blockMousedown","index","shiftKey","length","useBlockDragger","dragState","dragging","markLine","reactive","x","y","mousedown","BWidth","BHeight","startPos","map","lines","container","ATop","ALeft","AWidth","AHeight","showTop","showLeft","mousemove","mouseup","moveX","moveY","i","t","s","Math","abs","l","idx","useCommand","state","current","queue","commands","commandArray","destroyArray","registry","command","name","args","redo","undo","execute","pushQueue","slice","keyboard","ElMessage","showClose","message","item","init","this","before","start","deepcopy","end","drag","off","after","newValue","newBlock","oldBlock","indexOf","splice","keyboardEvent","keyCodes","onKeydown","ctrlKey","keyCode","keyString","join","window","onUnmounted","fn","DialogComponent","option","isShow","expose","showDialog","onCancel","onConfirm","content","title","default","footer","vm","$dialog","el","createElement","createVNode","appendChild","exposed","updateContainer","Function","updateBlock","editData","AUDIO","updateFace","file","target","files","URL","webkitURL","createObjectURL","filePath","reset","apply","handleAvatarSuccess","res","raw","beforeAvatarUpload","isJPG","isLt2M","$message","error","checkUrl","urlString","reg","test","correct","isNumber","val","regPos","regNeg","correctNum","watch","immediate","entries","propConfig","label","input","inputNum","undefined","color","select","options","opt","link","picture","hint","lable","components","editorBlock","ElButton","ElCard","EditorOperator","emits","get","set","containerStyles","buttons","handler","JSON","stringify","delete","deleteAll","allColorStyle","changecolorstyle","getElementById","selectedOptions","_value","dir","root","querySelector","style","setProperty","componentList","preview","btn","imgdata","require","createEditorConfig","register","redirect","url","open","alert","eventList","event","registerConfig","createInputProp","createInputNumProp","createColorProp","createSelectProp","createAddressProp","createPictureProp","createFileProp","accept","fontSize","handleClick","text","fontsize","underline","disabled","Editor","provide","username","password","__exports__","app","createApp","App","ElementPlusIconsVue","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}